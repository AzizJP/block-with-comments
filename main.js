(()=>{"use strict";var e=function(e,t,n,r){var o=e%10;return 1===o?t:o>=2&&o<=4?n:r};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}var a=r((function t(n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"_timePassedSince",(function(t){return i._initialDate=new Date(t),i._dateNow=new Date,i._dateDifference=Math.abs(i._dateNow.getTime()-i._initialDate.getTime()),i._diffDays=Math.ceil(i._dateDifference/864e5),i._yearsPassed=Math.floor(i._diffDays/360),i._monthsPassed=Math.floor(i._diffDays%360/30),i._daysPassed=i._diffDays%360%30,i._years=e(i._yearsPassed,"год","года","лет"),i._months=e(i._monthsPassed,"месяц","месяца","месяцев"),i._days=e(i._daysPassed,"день","дня","дней"),0===i._yearsPassed&&0===i._monthsPassed?"".concat(i._daysPassed," ").concat(i._days," назад"):0===i._yearsPassed?"".concat(i._monthsPassed," ").concat(i._months," ").concat(i._daysPassed," ").concat(i._days," назад"):"".concat(i._yearsPassed," ").concat(i._years," ").concat(i._monthsPassed," ").concat(i._months," ").concat(i._daysPassed," ").concat(i._days," назад")})),o(this,"renderPostInfo",(function(){i._dateCreatedElement=document.getElementById("date-created"),i._dateUpdatedElement=document.getElementById("date-updated"),i._viewedElement=document.getElementById("viewed"),i._buttons=document.querySelector(".post__rating"),i._countElement=i._buttons.querySelector(".post__rating_counter"),i._dateCreatedElement.textContent=i._timePassedSince(i._postInfo.dateCreated),i._dateUpdatedElement.textContent=i._timePassedSince(i._postInfo.dateUpdated),i._viewedElement.textContent="".concat(i._postInfo.viewed," раз"),i._setEventListeners()})),o(this,"_handleRatingIncrement",(function(){i._ratingElements.count++,i._countElement.textContent=i._ratingElements.count})),o(this,"_handleRatingDecrement",(function(){i._ratingElements.count--,i._countElement.textContent=i._ratingElements.count})),o(this,"_addPrompt",(function(e){if(!(document.body.clientWidth<1024)){var t=e.target,n=t.getBoundingClientRect(),r=t.dataset.prompt;if(r){i._ratingElements.promptElement=document.createElement("div"),i._ratingElements.promptElement.className="post__prompt",i._ratingElements.promptElement.innerHTML=r,i._buttons.append(i._ratingElements.promptElement);var o=n.left+t.offsetWidth+20,a=n.top-(i._ratingElements.promptElement.offsetHeight-t.offsetHeight)/2;a<0&&(a=n.top),i._ratingElements.promptElement.style.left="".concat(o,"px"),i._ratingElements.promptElement.style.top="".concat(a,"px")}}})),o(this,"_deletePrompt",(function(){i._ratingElements.promptElement&&(i._ratingElements.promptElement.remove(),i._ratingElements.promptElement=null)})),o(this,"_setEventListeners",(function(){i._incrementButtonElement=i._buttons.querySelector(".post__button_increment"),i._decrementButtonElement=i._buttons.querySelector(".post__button_decrement"),i._incrementButtonElement.onclick=i._handleRatingIncrement,i._decrementButtonElement.onclick=i._handleRatingDecrement,i._buttons.onmouseover=function(e){return i._addPrompt(e)},i._buttons.onmouseout=i._deletePrompt})),this._postInfo=n,this._ratingElements=r}));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function m(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}var _=m((function e(t,n){var r=this,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"addComment",(function(e){r._container.prepend(r._renderer(e))})),l(this,"renderComments",(function(e){e.forEach((function(e){r.addComment(e)}))})),this._renderer=o,this._sectionSelector=n,this._container=document.querySelector(this._sectionSelector)})),f=function(e){return"".concat(e.slice(3,5),".").concat(e.slice(0,2),".").concat(e.slice(6))};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var E=y((function e(t){var n=this,r=t.userName,o=t.text,i=t.date,a=t.isLiked;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"_getCommentTemplate",(function(){return document.querySelector("#comments").content.querySelector(".comment").cloneNode(!0)})),b(this,"generateComment",(function(){n._commentElement=n._getCommentTemplate(),n._userNameElement=n._commentElement.querySelector(".comment__user-name"),n._userTextElement=n._commentElement.querySelector(".comment__user-text"),n._commentDateElement=n._commentElement.querySelector(".comment__info-date");var e=new Date,t=n._date,r=e-new Date(f(t))<864e5,o=e-new Date(f(t))<1728e5,i=e-new Date(f(t))<0;return n._userNameElement.textContent=n._userName,n._userTextElement.textContent=n._text,i?n._commentDateElement.textContent="прыжок в будущее - в ".concat(n._date.slice(0,11)," ").concat(n._date.slice(11)):r?n._commentDateElement.textContent="сегодня, в ".concat(n._date.slice(11)):o?n._commentDateElement.textContent="вчера, в ".concat(n._date.slice(11)):n._date.slice(11)?n._commentDateElement.textContent="".concat(n._date.slice(0,11)," в ").concat(n._date.slice(11)):n._commentDateElement.textContent=n._date,n._setEventListeners(),n._commentElement})),b(this,"_handleLikeClick",(function(e){n._isLiked?(e.classList.remove("comment__button_liked"),e.classList.add("comment__button_like"),n._isLiked=!1):(e.classList.remove("comment__button_like"),e.classList.add("comment__button_liked"),n._isLiked=!0)})),b(this,"_handleTrashClick",(function(e){e.remove()})),b(this,"_setEventListeners",(function(){n._trashButtonElement=n._commentElement.querySelector("#trash"),n._likeButtonElement=n._commentElement.querySelector("#like"),n._likeButtonElement.addEventListener("click",(function(){return n._handleLikeClick(n._likeButtonElement)})),n._trashButtonElement.addEventListener("click",(function(){return n._handleTrashClick(n._commentElement)}))})),this._userName=r,this._text=o,this._date=i,this._isLiked=a})),h=[{userName:"Cuphead",text:"Ты пробовал выстрелить из пальца XD?",date:"14.03.2023, 12:25",isLiked:!1},{userName:"Dr.Tea",text:"Кинь баг-репорт производителю",date:"13.03.2023, 13:25",isLiked:!1},{userName:"Чайный Барон",text:"Решил проблему следующим образом: нужно не только достать пакетик из упаковки, еще необходимо вскрыть пакетик и вытащить саму завариваемую часть",date:"10.03.2023, 13:25",isLiked:!1}];function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function w(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===S(t)?t:String(t)}var C=w((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"renderForm",(function(){n._addCommentButton=document.querySelector(".add-comment__button"),n._formWrapper=document.querySelector(".form__wrapper"),n._form=n._formWrapper.querySelector(".form"),n._submitButton=n._formWrapper.querySelector("#submit-button"),n._cancelButton=n._formWrapper.querySelector("#cancel-button"),n._formName=document.querySelector(".form__user-name"),n._formText=document.querySelector(".form__text"),n._formDate=document.querySelector(".form__date"),n._setEventListeners()})),P(this,"_openPopup",(function(){n._isOpen=!0,n._formWrapper.style.display="flex"})),P(this,"_closePopup",(function(e){e.preventDefault(),n._formName.value="",n._formText.value="",n._formDate.value="",n._isOpen=!1,n._formWrapper.style.display="none"})),P(this,"addComment",(function(e){e.preventDefault(),n._comment.userName=n._formName.value,n._comment.text=n._formText.value,n._comment.date=n._formDate.valueAsNumber?new Date(n._formDate.valueAsNumber-108e5).toLocaleString().slice(0,17):(new Date).toLocaleString().slice(0,17),n._comment.isLiked=!1,console.log(n._comment),n._commentList.push(n._comment),n._closePopup(e)})),P(this,"_closeByEsc",(function(e){n._isOpen&&"Escape"===e.key&&n._closePopup(e)})),P(this,"_setEventListeners",(function(){document.addEventListener("keydown",(function(e){return n._closeByEsc(e)})),n._addCommentButton.addEventListener("click",n._openPopup),n._cancelButton.addEventListener("click",n._closePopup)})),this._commentList=t,this._isOpen=!1,this._comment={},this._isAdded=!1}));function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function D(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===L(t)?t:String(t)}var N=D((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"_showInputError",(function(e){var t=e.nextSibling.nextSibling;t.style.display="inline",t.textContent=e.validationMessage})),j(this,"_deleteInputError",(function(e){var t=e.nextSibling.nextSibling;t.style.display="none",t.textContent=""})),j(this,"_isValid",(function(e){return e.validity.valid})),j(this,"_handleInputEvent",(function(){t._deleteInputError(t._userName),t._userName.removeEventListener("input",t._handleInputEvent)})),j(this,"_handleTextareaEvent",(function(){t._deleteInputError(t._text),t._text.removeEventListener("input",t._handleTextareaEvent)})),j(this,"enableValidation",(function(){return t._formElement=document.querySelector(".form"),t._userName=t._formElement.querySelector(".form__user-name"),t._text=t._formElement.querySelector(".form__text"),t._isValid(t._userName)||t._showInputError(t._userName),t._isValid(t._text)||t._showInputError(t._text),t._setEventListeners(),t._isValid(t._userName)&&t._isValid(t._text)})),j(this,"_setEventListeners",(function(){t._userName.addEventListener("input",t._handleInputEvent),t._text.addEventListener("input",t._handleTextareaEvent)}))}));function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}new a({dateCreated:"12.12.2018",dateUpdated:"12.25.2020",viewed:12e3},{count:0,promptElement:null}).renderPostInfo();var I=new _({renderer:function(e){return new E(e).generateComment()}},".comments"),O=h.sort((function(e,t){return new Date(f(e.date))-new Date(f(t.date))}));I.renderComments(O);var B=new C(h);B.renderForm();var A=new N;document.querySelector(".form").addEventListener("submit",(function(e){if(e.preventDefault(),A.enableValidation()){B.addComment(e);var t=(n=h,function(e){if(Array.isArray(e))return q(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(h.length-1);I.renderComments(t)}var n}))})();
//# sourceMappingURL=main.js.map